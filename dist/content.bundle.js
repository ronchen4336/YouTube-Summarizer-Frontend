/*! For license information please see content.bundle.js.LICENSE.txt */
(()=>{var e={633:(e,t,r)=>{var n=r(738).default;function o(){"use strict";e.exports=o=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function m(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{m({},"")}catch(t){m=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new O(n||[]);return s(i,"_invoke",{value:z(e,r,a)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var v="suspendedStart",f="suspendedYield",y="executing",g="completed",b={};function w(){}function x(){}function E(){}var L={};m(L,l,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(q([])));S&&S!==i&&a.call(S,l)&&(L=S);var _=E.prototype=w.prototype=Object.create(L);function T(e){["next","throw","return"].forEach((function(t){m(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,s,c){var l=h(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,c)}))}c(l.arg)}var o;s(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}})}function z(e,r,n){var o=v;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=N(s,n);if(c){if(c===b)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=h(e,r,n);if("normal"===l.type){if(o=n.done?g:f,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=g,n.method="throw",n.arg=l.arg)}}}function N(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,N(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function q(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return x.prototype=E,s(_,"constructor",{value:E,configurable:!0}),s(E,"constructor",{value:x,configurable:!0}),x.displayName=m(E,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,m(e,d,"GeneratorFunction")),e.prototype=Object.create(_),e},r.awrap=function(e){return{__await:e}},T(C.prototype),m(C.prototype,u,(function(){return this})),r.AsyncIterator=C,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new C(p(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(_),m(_,d,"Generator"),m(_,l,(function(){return this})),m(_,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=q,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:q(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},r}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function s(t){e(a,o,i,s,c,"next",t)}function c(t){e(a,o,i,s,c,"throw",t)}s(void 0)}))}}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(756),i=r.n(o),a=window.browser||window.chrome,s="yt-persistent-summary-panel",c=["Negotiating with YouTube's algorithm... ü§ù","Bribing the AI to summarize faster... üç©ü§ñ","Convincing videos to spill the tea... ‚òïÔ∏è","Filtering clickbait, almost there... üé£","Teaching the bots how to speed-read... üìñü§ñ","Distracting YouTube ads while we sneak past... üïµÔ∏è‚Äç‚ôÄÔ∏è","Compressing hours into seconds‚Äîmagic! ü™Ñ‚ú®","Wrestling the video into submission... ü§º","Avoiding cat videos‚Äîpromise! üê±‚ùå","Stealing secrets from the video ninjas... ü•∑","Tickling bytes for a faster summary... ü§≠üíª","Snacking on boring parts, yum... üçΩÔ∏èü•±","Convincing creators we watched everything... ü§êüëÄ","Hacking into video wisdom... ethically! üßë‚Äçüíªüòá","Loading wit and charm into summaries... üé©‚ú®"];function l(){var e=document.createElement("button");e.className="ytp-button yt-summarizer-button",e.innerHTML='\n        <span style="font-size: 16px; margin-right: 4px;">‚ú®</span>\n        <span style="font-size: 13px;">Summarize</span>\n    ',e.addEventListener("click",v);var t=document.querySelector(".ytp-right-controls");t&&t.insertBefore(e,t.firstChild)}function u(){var e=document.getElementById(s);e&&e.remove();var t=document.createElement("div");t.id=s,t.className="yt-summarizer-panel persistent-panel";var r=document.createElement("div");r.className="yt-summarizer-panel-header";var n=document.createElement("h2");n.textContent="Video Summary";var o=document.createElement("div");o.className="yt-summarizer-controls";var i=document.createElement("button");i.className="yt-summarizer-minimize",i.title="Minimize";var a=document.createElement("button");a.className="yt-summarizer-close",a.title="Close",o.appendChild(i),o.appendChild(a),r.appendChild(n),r.appendChild(o);var c=document.createElement("div");return c.className="yt-summarizer-panel-content",i.addEventListener("click",(function(){t.classList.toggle("minimized"),i.classList.toggle("minimized"),i.title=t.classList.contains("minimized")?"Restore":"Minimize"})),a.addEventListener("click",(function(){t.remove()})),t.appendChild(r),t.appendChild(c),document.body.appendChild(t),t}function d(e){try{var t;console.log("Displaying persistent summary:",e);var r=document.getElementById(s);r||(r=u());var o,i=r.querySelector(".yt-summarizer-panel-content");if(!i)return void console.error("Panel content area not found");if(e.error||null!==(t=e.data)&&void 0!==t&&t.error){if("Free trial limit reached"===(e.data||e).error)return void(i.innerHTML='\n                    <div class="error-message">\n                        <div class="error-icon">‚ÑπÔ∏è</div>\n                        <div class="error-content">\n                            <h3>Free Trial Limit Reached</h3>\n                            <p>You have used all 3 free summaries.</p>\n                            <p style="margin-top: 12px;">We\'re working on adding new subscription tiers with increased usage limits! \n                            For early access or increased limits, please email:</p>\n                            <a href="mailto:ronaldchen4236@gmail.com" \n                               style="color: #2196F3; text-decoration: underline; display: block; margin-top: 8px;">\n                               ronaldchen4236@gmail.com\n                            </a>\n                        </div>\n                    </div>\n                ');i.innerHTML='\n                <div class="error-message">\n                    <div class="error-icon">‚ùå</div>\n                    <div class="error-content">\n                        <p>Unable to generate summary. Please try again later.</p>\n                        <button class="login-button" style="margin-top: 16px;">Try Again</button>\n                    </div>\n                </div>\n            ';var a=i.querySelector(".login-button");return void(a&&a.addEventListener("click",v))}if(e.response)o=JSON.parse(e.response);else if("object"===n(e)&&e.data)o=e.data;else{if("object"!==n(e)||!e.title||!e.body)throw new Error("Invalid response format");o=e}i.innerHTML="";var c=document.createElement("div");c.className="summary-title",c.textContent=o.title,i.appendChild(c),o.body.sort((function(e,t){var r,n;return((null===(r=e.metadata)||void 0===r?void 0:r.priority)||999)-((null===(n=t.metadata)||void 0===n?void 0:n.priority)||999)})).forEach((function(e){var t,r,n,o=document.createElement("div");o.className="summary-section",null!==(t=e.metadata)&&void 0!==t&&t.content_type&&o.classList.add("content-".concat(e.metadata.content_type)),o.setAttribute("data-section-type",(null===(r=e.metadata)||void 0===r?void 0:r.content_type)||"general");var a=document.createElement("h3");a.textContent=e.subtitle,o.appendChild(a);var s=document.createElement("div");switch(s.className="section-content",null===(n=e.metadata)||void 0===n?void 0:n.display_hint){case"highlight":s.className="highlight",s.textContent=e.body_content[0];break;case"bullet_list":var c=document.createElement("ul");c.className="bullet-list",e.body_content.forEach((function(e){var t=document.createElement("li");t.textContent=e,c.appendChild(t)})),s.appendChild(c);break;default:s.className="paragraph",e.body_content.forEach((function(e){var t=document.createElement("p");t.textContent=e,s.appendChild(t)}))}o.appendChild(s),i.appendChild(o)}))}catch(t){console.error("Error displaying persistent summary:",t),console.error("Summary data:",e);var l=document.getElementById(s);if(l){var d=l.querySelector(".yt-summarizer-panel-content");if(d){d.innerHTML='\n                    <div class="error-message">\n                        <div class="error-icon">‚ùå</div>\n                        <div class="error-content">\n                            <p>Unable to display summary. Please try again later.</p>\n                            <button class="login-button" style="margin-top: 16px;">Try Again</button>\n                        </div>\n                    </div>\n                ';var m=d.querySelector(".login-button");m&&m.addEventListener("click",v)}}}}function m(){return p.apply(this,arguments)}function p(){return(p=t(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelector(".ytp-right-controls")?l():setTimeout(m,1e3);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}m();var h=location.href;function v(){return f.apply(this,arguments)}function f(){return(f=t(i().mark((function e(){var r,o,a,l,m,p,h,f,y,g,b,w,x,E,L;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Summarize button clicked"),e.next=4,new Promise((function(e,t){chrome.runtime.sendMessage({action:"checkAuth"},(function(r){chrome.runtime.lastError?t(chrome.runtime.lastError):e(r)}))}));case 4:if(r=e.sent,console.log("Auth check response:",r),r.isAuthenticated){e.next=14;break}return o=(o=document.getElementById(s))||u(),(a=o.querySelector(".yt-summarizer-panel-content")).innerHTML='\n                <div class="login-content">\n                    <h2>Sign in Required</h2>\n                    <p>Please sign in with your Google account to use the YouTube Summarizer</p>\n                    <button class="login-button">Sign in with Google</button>\n                </div>\n            ',a.querySelector(".login-button").addEventListener("click",t(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.innerHTML='\n                        <div class="loading-container">\n                            <div class="spinner">\n                                <div class="spinner-circle"></div>\n                            </div>\n                            <p>Signing in...</p>\n                        </div>\n                    ',e.next=4,new Promise((function(e,t){chrome.runtime.sendMessage({action:"authenticate"},(function(r){chrome.runtime.lastError?t(chrome.runtime.lastError):!r||r.error?t(new Error((null==r?void 0:r.error)||"Authentication failed")):e(r)}))}));case 4:if(!(t=e.sent).success){e.next=9;break}v(),e.next=10;break;case 9:throw new Error(t.error||"Authentication failed");case 10:e.next=18;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Login failed:",e.t0),a.innerHTML='\n                        <div class="error-message">\n                            <div class="error-icon">‚ùå</div>\n                            <p>'.concat(e.t0.message,'</p>\n                            <button class="login-button" style="margin-top: 16px;">Try Again</button>\n                        </div>\n                    '),(r=a.querySelector(".login-button"))&&r.addEventListener("click",v);case 18:case"end":return e.stop()}}),e,null,[[0,12]])})))),e.abrupt("return");case 14:if(l=(l=document.getElementById(s))||u(),m=l.querySelector(".yt-summarizer-panel-content"),(p=document.createElement("div")).className="loading-container",p.innerHTML='\n            <div class="spinner">\n                <div class="spinner-circle"></div>\n                <div class="spinner-circle"></div>\n                <div class="spinner-circle"></div>\n            </div>\n            <p id="loading-message" class="loading-text">'.concat(c[0],"</p>\n        "),m.innerHTML="",m.appendChild(p),h=p.querySelector("#loading-message"),f=0,y=setInterval((function(){h&&document.body.contains(h)?(f=(f+1)%c.length,h.textContent=c[f]):clearInterval(y)}),3e3),e.prev=25,g=window.location.href,console.log("Current URL:",g),g.includes("youtube.com/watch")){e.next=30;break}throw new Error("Not a YouTube video page");case 30:return e.next=32,chrome.runtime.sendMessage({action:"getYouTubeVideo",videoUrl:g});case 32:if(b=e.sent,console.log("Video summary response:",b),clearInterval(y),b.success){e.next=37;break}throw new Error(b.error||"Failed to process video");case 37:console.log("Displaying summary data:",b.data),d(b.data),e.next=46;break;case 41:throw e.prev=41,e.t0=e.catch(25),console.error("Summary request failed:",e.t0),clearInterval(y),e.t0;case 46:e.next=53;break;case 48:e.prev=48,e.t1=e.catch(0),console.error("Error:",e.t1),(w=document.getElementById(s))&&(x=w.querySelector(".yt-summarizer-panel-content"))&&(null!==(E=e.t1.message)&&void 0!==E&&E.includes("Free trial limit")||"object"===n(e.t1)&&"Free trial limit reached"===e.t1.error?x.innerHTML='\n                        <div class="error-message">\n                            <div class="error-icon">‚ÑπÔ∏è</div>\n                            <div class="error-content">\n                                <h3>Free Trial Limit Reached</h3>\n                                <p>You have used all 3 free summaries.</p>\n                                <p style="margin-top: 12px;">We\'re working on adding new subscription tiers with increased usage limits! \n                                For early access or increased limits, please email:</p>\n                                <a href="mailto:ronaldchen4236@gmail.com" \n                                   style="color: #2196F3; text-decoration: underline; display: block; margin-top: 8px;">\n                                   ronaldchen4236@gmail.com\n                                </a>\n                            </div>\n                        </div>\n                    ':(x.innerHTML='\n                        <div class="error-message">\n                            <div class="error-icon">‚ùå</div>\n                            <div class="error-content">\n                                <p>'.concat(e.t1.message,'</p>\n                                <button class="login-button" style="margin-top: 16px;">Try Again</button>\n                            </div>\n                        </div>\n                    '),(L=x.querySelector(".login-button"))&&L.addEventListener("click",v)));case 53:case"end":return e.stop()}}),e,null,[[0,48],[25,41]])})))).apply(this,arguments)}new MutationObserver((function(){location.href!==h&&(h=location.href,m())})).observe(document,{subtree:!0,childList:!0}),a.runtime.onMessage.addListener((function(e,t,r){return"display_persistent_summary"===e.action?(console.log("Received request to display persistent summary"),e.summaryData?(d(e.summaryData),r({success:!0})):(console.error("No summary data received"),r({success:!1,error:"No summary data received"})),!0):"trigger_summarize"===e.action?(console.log("Received request to trigger summarization"),v(),r({success:!0}),!0):void 0})),window.handleSummarizeClick=v})()})();